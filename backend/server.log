
> teampulse-backend@1.0.0 start
> node src/index.js

Database connection successful
Database connected successfully
Server is running on port 5001
WebSocket server is running
Environment: development
::1 - - [01/Aug/2025:01:44:52 +0000] "GET /health HTTP/1.1" 200 54 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:45:00 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:45:21 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:45:21 +0000] "GET /api/users/me HTTP/1.1" 200 96 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:45:29 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:45:29 +0000] "GET /api/teams HTTP/1.1" 404 21 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:45:44 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:45:44 +0000] "GET /api/teams/user HTTP/1.1" 200 2 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:46:05 +0000] "GET /api/objectives/user HTTP/1.1" 200 26 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:46:06 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:46:06 +0000] "GET /api/history/summary HTTP/1.1" 200 1122 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:46:17 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:46:17 +0000] "GET /api/objectives/user HTTP/1.1" 200 26 "-" "curl/8.7.1"
::1 - - [01/Aug/2025:01:49:14 +0000] "GET /health HTTP/1.1" 200 54 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:49:14 +0000] "GET /api/objectives/user HTTP/1.1" 200 26 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:49:14 +0000] "GET /api/tasks HTTP/1.1" 404 21 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:49:23 +0000] "GET /health HTTP/1.1" 200 54 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:49:23 +0000] "GET /api/objectives/user HTTP/1.1" 200 26 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:49:23 +0000] "GET /api/tasks HTTP/1.1" 404 21 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Get user tasks error: Error: Error finding tasks by assignee: Unknown column 't.key_result_id' in 'on clause'
    at Task.findByAssignee (/Users/pablokim/teampulse/backend/src/models/Task.js:150:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getUserTasks (/Users/pablokim/teampulse/backend/src/controllers/taskController.js:93:21)
::1 - - [01/Aug/2025:01:49:29 +0000] "GET /api/tasks/user HTTP/1.1" 500 108 "-" "curl/8.7.1"
Get user tasks error: Error: Error finding tasks by assignee: Unknown column 't.owner_id' in 'on clause'
    at Task.findByAssignee (/Users/pablokim/teampulse/backend/src/models/Task.js:150:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getUserTasks (/Users/pablokim/teampulse/backend/src/controllers/taskController.js:93:21)
::1 - - [01/Aug/2025:01:49:53 +0000] "GET /api/tasks/user HTTP/1.1" 500 103 "-" "curl/8.7.1"
Get user tasks error: Error: Error finding tasks by assignee: Unknown column 't.owner_id' in 'on clause'
    at Task.findByAssignee (/Users/pablokim/teampulse/backend/src/models/Task.js:150:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getUserTasks (/Users/pablokim/teampulse/backend/src/controllers/taskController.js:93:21)
::1 - - [01/Aug/2025:01:50:11 +0000] "GET /api/tasks/user?sort=due_date&order=asc HTTP/1.1" 500 103 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Get user tasks error: Error: Error finding tasks by assignee: Unknown column 't.owner_id' in 'on clause'
    at Task.findByAssignee (/Users/pablokim/teampulse/backend/src/models/Task.js:150:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getUserTasks (/Users/pablokim/teampulse/backend/src/controllers/taskController.js:93:21)
::1 - - [01/Aug/2025:01:50:11 +0000] "GET /api/tasks/user?sort=due_date&order=asc HTTP/1.1" 500 103 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:50:13 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:50:13 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Database query error: Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:18:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  code: 'ER_WRONG_ARGUMENTS',
  errno: 1210,
  sql: '\n' +
    '      SELECT \n' +
    '        cs.*,\n' +
    '        COUNT(cm.id) as message_count,\n' +
    '        MAX(cm.created_at) as last_message_at\n' +
    '      FROM chat_sessions cs\n' +
    '      LEFT JOIN chat_messages cm ON cs.id = cm.session_id\n' +
    '      WHERE cs.user_id = ?\n' +
    '     AND cs.tool_type = ? GROUP BY cs.id, cs.user_id, cs.tool_type, cs.session_name, cs.created_at, cs.updated_at ORDER BY cs.updated_at DESC LIMIT ? OFFSET ?',
  sqlState: 'HY000',
  sqlMessage: 'Incorrect arguments to mysqld_stmt_execute'
}
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:18:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
::1 - - [01/Aug/2025:01:50:13 +0000] "GET /api/chat/sessions?limit=20&offset=0&tool_type=teampulse_ai HTTP/1.1" 500 79 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Database query error: Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:18:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  code: 'ER_WRONG_ARGUMENTS',
  errno: 1210,
  sql: '\n' +
    '      SELECT \n' +
    '        cs.*,\n' +
    '        COUNT(cm.id) as message_count,\n' +
    '        MAX(cm.created_at) as last_message_at\n' +
    '      FROM chat_sessions cs\n' +
    '      LEFT JOIN chat_messages cm ON cs.id = cm.session_id\n' +
    '      WHERE cs.user_id = ?\n' +
    '     AND cs.tool_type = ? GROUP BY cs.id, cs.user_id, cs.tool_type, cs.session_name, cs.created_at, cs.updated_at ORDER BY cs.updated_at DESC LIMIT ? OFFSET ?',
  sqlState: 'HY000',
  sqlMessage: 'Incorrect arguments to mysqld_stmt_execute'
}
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:18:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
::1 - - [01/Aug/2025:01:50:13 +0000] "GET /api/chat/sessions?limit=20&offset=0&tool_type=teampulse_ai HTTP/1.1" 500 79 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:50:17 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
::1 - - [01/Aug/2025:01:50:17 +0000] "POST /api/users/demo-login HTTP/1.1" 200 257 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Database query error: Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:36:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  code: 'ER_WRONG_ARGUMENTS',
  errno: 1210,
  sql: '\n' +
    '      SELECT \n' +
    '        cs.*,\n' +
    '        COUNT(cm.id) as message_count,\n' +
    '        MAX(cm.created_at) as last_message_at\n' +
    '      FROM chat_sessions cs\n' +
    '      LEFT JOIN chat_messages cm ON cs.id = cm.session_id\n' +
    '      WHERE cs.user_id = ?\n' +
    '     AND cs.tool_type = ? GROUP BY cs.id, cs.user_id, cs.tool_type, cs.session_name, cs.created_at, cs.updated_at ORDER BY cs.updated_at DESC LIMIT ? OFFSET ?',
  sqlState: 'HY000',
  sqlMessage: 'Incorrect arguments to mysqld_stmt_execute'
}
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:36:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
::1 - - [01/Aug/2025:01:50:17 +0000] "GET /api/chat/sessions?limit=20&offset=0&tool_type=teampulse_ai HTTP/1.1" 500 79 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Database query error: Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:36:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  code: 'ER_WRONG_ARGUMENTS',
  errno: 1210,
  sql: '\n' +
    '      SELECT \n' +
    '        cs.*,\n' +
    '        COUNT(cm.id) as message_count,\n' +
    '        MAX(cm.created_at) as last_message_at\n' +
    '      FROM chat_sessions cs\n' +
    '      LEFT JOIN chat_messages cm ON cs.id = cm.session_id\n' +
    '      WHERE cs.user_id = ?\n' +
    '     AND cs.tool_type = ? GROUP BY cs.id, cs.user_id, cs.tool_type, cs.session_name, cs.created_at, cs.updated_at ORDER BY cs.updated_at DESC LIMIT ? OFFSET ?',
  sqlState: 'HY000',
  sqlMessage: 'Incorrect arguments to mysqld_stmt_execute'
}
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (/Users/pablokim/teampulse/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at Object.query (/Users/pablokim/teampulse/backend/src/utils/database.js:26:34)
    at exports.getSessions (/Users/pablokim/teampulse/backend/src/controllers/chatController.js:51:31)
    at Layer.handle [as handle_request] (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/pablokim/teampulse/backend/node_modules/express/lib/router/route.js:149:13)
    at authenticateUser (/Users/pablokim/teampulse/backend/src/middleware/auth.js:36:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
::1 - - [01/Aug/2025:01:50:17 +0000] "GET /api/chat/sessions?limit=20&offset=0&tool_type=teampulse_ai HTTP/1.1" 500 79 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Get user tasks error: Error: Error finding tasks by assignee: Unknown column 't.owner_id' in 'on clause'
    at Task.findByAssignee (/Users/pablokim/teampulse/backend/src/models/Task.js:150:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getUserTasks (/Users/pablokim/teampulse/backend/src/controllers/taskController.js:93:21)
::1 - - [01/Aug/2025:01:50:39 +0000] "GET /api/tasks/user HTTP/1.1" 500 103 "-" "curl/8.7.1"
Get user tasks error: Error: Error finding tasks by assignee: Unknown column 't.owner_id' in 'on clause'
    at Task.findByAssignee (/Users/pablokim/teampulse/backend/src/models/Task.js:150:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getUserTasks (/Users/pablokim/teampulse/backend/src/controllers/taskController.js:93:21)
::1 - - [01/Aug/2025:01:50:49 +0000] "GET /api/tasks/user?sort=due_date&order=asc HTTP/1.1" 500 103 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
Get user tasks error: Error: Error finding tasks by assignee: Unknown column 't.owner_id' in 'on clause'
    at Task.findByAssignee (/Users/pablokim/teampulse/backend/src/models/Task.js:150:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getUserTasks (/Users/pablokim/teampulse/backend/src/controllers/taskController.js:93:21)
::1 - - [01/Aug/2025:01:50:49 +0000] "GET /api/tasks/user?sort=due_date&order=asc HTTP/1.1" 500 103 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
