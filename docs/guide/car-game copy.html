<!DOCTYPE html>

<html lang="ko">

<head>

<meta charset="UTF-8">

<title>자동차 장애물 피하기 게임</title>

<style>

body { background: #222; display: flex; align-items: center; justify-content: center; height: 100vh; }

canvas { background: #444; display: block; border: 3px solid #fff; }

#msg { position: absolute; top: 30px; color: #fff; font-size: 2em; width: 100%; text-align: center; pointer-events: none;}

</style>

</head>

<body>

<canvas id="game" width="400" height="600"></canvas>

<div id="msg"></div>

<script>

const canvas = document.getElementById('game');

const ctx = canvas.getContext('2d');

const roadWidth = 240;

const roadX = (canvas.width - roadWidth) / 2;

const carWidth = 40, carHeight = 70;

const carY = canvas.height - carHeight - 20;

let carX = roadX + roadWidth/2 - carWidth/2;

let leftPressed = false, rightPressed = false;

let obstacles = [];

let obstacleSpeed = 4;

let frame = 0;

let score = 0;

let gameOver = false;

function drawRoad() {

ctx.fillStyle = "#888";

ctx.fillRect(roadX, 0, roadWidth, canvas.height);

ctx.strokeStyle = "#fff";

ctx.lineWidth = 4;

ctx.strokeRect(roadX, 0, roadWidth, canvas.height);

ctx.setLineDash([20, 20]);

ctx.strokeStyle = "#fff";

ctx.lineWidth = 2;

ctx.beginPath();

ctx.moveTo(roadX + roadWidth/2, 0);

ctx.lineTo(roadX + roadWidth/2, canvas.height);

ctx.stroke();

ctx.setLineDash([]);

}

function drawCar() {

ctx.fillStyle = "#0af";

ctx.fillRect(carX, carY, carWidth, carHeight);

// 창문

ctx.fillStyle = "#fff";

ctx.fillRect(carX+8, carY+10, carWidth-16, 20);

}

function drawObstacles() {

ctx.fillStyle = "#f33";

obstacles.forEach(o => {

ctx.fillRect(o.x, o.y, o.w, o.h);

});

}

function moveObstacles() {

for (let o of obstacles) o.y += obstacleSpeed;

obstacles = obstacles.filter(o => o.y < canvas.height);

}

function spawnObstacle() {

// 장애물 크기와 위치 랜덤

const w = 50 + Math.random() * 50;

const h = 30;

const minX = roadX;

const maxX = roadX + roadWidth - w;

const x = minX + Math.random() * (maxX - minX);

obstacles.push({x, y: -h, w, h});

}

function detectCollision() {

for (let o of obstacles) {

if (carX < o.x + o.w &&

carX + carWidth > o.x &&

carY < o.y + o.h &&

carY + carHeight > o.y) {

return true;

}

}

return false;

}

function drawScore() {

ctx.fillStyle = "#fff";

ctx.font = "20px Arial";

ctx.fillText("점수: " + score, 20, 30);

}

function update() {

if (leftPressed) carX -= 7;

if (rightPressed) carX += 7;

// 경계 제한

carX = Math.max(roadX, Math.min(carX, roadX + roadWidth - carWidth));

}

function draw() {

ctx.clearRect(0, 0, canvas.width, canvas.height);

drawRoad();

drawCar();

drawObstacles();

drawScore();

}

function gameLoop() {

if (gameOver) return;

update();

draw();

moveObstacles();

if (frame % 60 === 0) { // 1초마다 장애물 생성

spawnObstacle();

score++;

if (score % 10 === 0) obstacleSpeed += 0.5;

}

if (detectCollision()) {

gameOver = true;

document.getElementById('msg').textContent = "게임 오버! 점수: " + score + " (새로고침 F5)";

return;

}

frame++;

requestAnimationFrame(gameLoop);

}

document.addEventListener('keydown', e => {

if (e.key === 'ArrowLeft') leftPressed = true;

if (e.key === 'ArrowRight') rightPressed = true;

});

document.addEventListener('keyup', e => {

if (e.key === 'ArrowLeft') leftPressed = false;

if (e.key === 'ArrowRight') rightPressed = false;

});

draw();

gameLoop();

</script>

</body>

</html>